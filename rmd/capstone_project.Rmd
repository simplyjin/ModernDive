---
title: "Capstone Data Proposal"
author: "Jin Chen"
date: "9/20/2020"
output: html_document
---

```{r}
library(tidyverse)
library(janitor)
library(skimr)
```

# Big Picture
## Research Question

I am hoping to understand how health factors and government spending affect life expectancy around the world. Specifically, I hope to answer whether expenditure on health and levels of alcohol consumption predict age of life expectancy in countries around the world.


## Description of data
The data set includes a variety of immunization, mortality, economic and social factors from 2000 - 2015 in 193 countries. The dataset was downloaded from Kaggle [here](https://www.kaggle.com/kumarajarshi/life-expectancy-who) and is a combined from several datasets from the World Health Organization and the United Nations website. 


## Load data


```{r}
data_raw <- read_csv("../data/life_data.csv")
#numerical outcome - life expectancy
#numerical explanatory - percentage expenditure
#categorical explanatory - creating this - alcohol - low medium high levels of consumption

```

## Clean Variable Names

```{r}
data_raw <- data_raw %>% 
  clean_names()

```


## Explore Data

```{r}
glimpse(data_raw)
skim(data_raw)

#we have 10 NA's for life expectancy, 194 for alcohol, and 0 for expenditure, this will need further investigation

data_raw %>% 
  select(country, year, life_expectancy, alcohol, percentage_expenditure) %>% 
  filter(is.na(life_expectancy))

data_raw %>% 
  select(country, year, life_expectancy, alcohol, percentage_expenditure) %>% 
  filter(is.na(alcohol))
```

# Variables

The **identification** variable is defined by the combination of the country and year variables.

The **outcome** variable is called `life_expectancy` for per country and year.

The **numerical** variable is called `percentage_expenditure` which is the expenditure on health as a percentage of GDP per capita per country per year.

I feel that this data set does not provide an appropriate **categorical** variable for this analysis so I will be creating a variable `alcohol_group` based on the numerical variable `alcohol`. `alcohol` measures the per capita consumption in liters of pure alcohol. I will divide `alcohol` into three levels of: `low`, `medium`, and `high`. 


# Rows/Observations

## Observaional units

Each row in this data set will represent a country from each year between 2000 and 2015.

## Sample Size

The data set has 2938 rows representing 193 unique countries.



# Preview Data

I will create a new data frame including only the variables that will be required in the analysis.


```{r}
data_analysis <- data_raw %>% 
  select(country, year, life_expectancy, alcohol, total_expenditure)

data_analysis %>% 
  sample_n(5)

```

